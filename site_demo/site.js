function serialize(e){if(e&&"FORM"===e.nodeName){var t,n,a=[];for(t=e.elements.length-1;t>=0;t-=1)if(""!==e.elements[t].name)switch(e.elements[t].nodeName){case"INPUT":switch(e.elements[t].type){case"text":case"email":case"hidden":case"password":case"button":case"reset":case"submit":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"checkbox":case"radio":e.elements[t].checked&&a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"file":}break;case"TEXTAREA":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"SELECT":switch(e.elements[t].type){case"select-one":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"select-multiple":for(n=e.elements[t].options.length-1;n>=0;n-=1)e.elements[t].options[n].selected&&a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].options[n].value))}break;case"BUTTON":switch(e.elements[t].type){case"reset":case"submit":case"button":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value))}}return a.join("&")}}function imageHandler(e,t,n){switch(e){case"fallback":t.hasAttribute("data-fallback")&&(t.style.backgroundColor=t.getAttribute("data-fallback"));break;case"parse":for(var a=new Object,r=new Image,s=0,o=t.attributes;s<o.length;s++)a[o[s].nodeName]=o[s].nodeValue;"data-src"in a&&(a.src=a["data-src"]);var c=a.src.substring(0,a.src.lastIndexOf(".")),i=a.src.split(".").pop();r.src=window.devicePixelRatio>2&&"data-plus"in a?c+"@3x."+i:window.devicePixelRatio>1&&"data-retina"in a?c+"@2x."+i:a.src;for(var l=["src","data-src","data-retina","data-plus","data-fallback","style"],s=0;s<l.length;s++)delete a[l[s]];for(var d in a)r.setAttribute(d,a[d]);r.complete&&r.classList.add("cached"),r.onload=function(){t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),n&&n()}}}function appHandler(e){var t=document.querySelectorAll(".apps a"),n=document.querySelector('.apps [href="#'+e+'"]'),a=document.querySelector("main"),r=a.querySelector(".limbo");window.stop(),r&&a.removeChild(r),a.classList.add("active"),forEach(t,function(e,t){t.classList.remove("selected"),t.classList.remove("active")}),n.classList.add("active"),n.classList.add("selected"),ga("send","event","App","requested",e),r=document.createElement("div"),r.classList.add("limbo"),a.appendChild(r),xhrGET("/apps/"+e+".html",function(t){var s=Array.prototype.slice.call(t.body.childNodes);forEach(s,function(e,t){r.appendChild(t)});var o=r.querySelectorAll("img"),c=0;forEach(o,function(t,s){imageHandler("parse",s,function(){if(c++,c>=o.length){for(;a.firstChild!==r;)a.removeChild(a.firstChild);var t=Array.prototype.slice.call(r.childNodes);forEach(t,function(e,t){a.appendChild(t)}),a.removeChild(r),a.id="app-"+e,a.classList.remove("active"),n.classList.remove("active"),ga("send","event","App","displayed",e)}})})})}function searchHandler(e,t){var n={path:[window.location.protocol,"//",window.location.host,window.location.pathname].join(""),hash:window.location.hash,query:getParameter("q")};switch(e){case"init":overscroll=!1,overscrollBreakpoint=660,throttle("resize","throttledResize"),searchHandler("overscroll"),searchHandler("fallback"),n.query&&(searchInput.value=n.query,searchInput.focus()),searchInput.value&&searchHandler("search",searchInput.value),searchInput===document.activeElement&&searchHandler("show");break;case"overscroll":t||(window.innerWidth<=overscrollBreakpoint?searchHandler("overscroll","on"):window.innerWidth>overscrollBreakpoint&&searchHandler("overscroll","off")),overscroll||"on"!==t?overscroll&&"off"===t&&(window.scrollTo(0,document.body.scrollTop-searchForm.clientHeight),overscroll=!1):(window.scrollTo(0,document.body.scrollTop+searchForm.clientHeight),overscroll=!0);break;case"show":searchForm.classList.add("invoked"),n.query&&n.query!==searchInput.value&&(searchInput.value=n.query),searchInput.value&&searchForm.classList.add("loaded"),setTimeout(function(){searchInput.setSelectionRange(0,searchInput.value.length)},0),window.innerWidth<=overscrollBreakpoint&&window.scrollTo(0,0),ga("send","event","Search","invoked");break;case"hide":searchForm.classList.remove("invoked"),searchInput.blur();break;case"clean":for(searchInput.value||searchForm.classList.remove("loaded");searchResults.firstChild;)searchResults.removeChild(searchResults.firstChild);break;case"search":history.replaceState(null,"",n.path+"?q="+escape(t)+n.hash),searchForm.classList.add("active"),searchInput.value&&searchForm.classList.add("loaded");var a=t.toLowerCase().split(" ").filter(Boolean);if(a.length&&"undefined"==typeof siteIndex)xhrGET("/index.json",function(e){siteIndex=e,t===searchInput.value&&searchHandler("search",searchInput.value)});else{if(a.length){searchHandler("clean"),"undefined"==typeof months&&(months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),"undefined"==typeof thisYear&&(thisYear=(new Date).getFullYear());for(var r=0,s=0;s<siteIndex.posts.length;s++){var o=siteIndex.posts[s].haystack,c=a.every(function(e){return-1!==o.indexOf(e)});if(c){r++;var i=document.createElement("li"),l=new Date(siteIndex.posts[s].date),d=months[l.getMonth()]+" "+l.getFullYear();siteIndex.posts[s].category?i.classList.add(siteIndex.posts[s].category):siteIndex.posts[s].link&&i.classList.add("link"),l.getFullYear()===thisYear&&(d=l.getDate()+" "+months[l.getMonth()]),i.innerHTML='<a href="'+siteIndex.posts[s].href+'">									<time>'+d+"</time>									<h3>"+siteIndex.posts[s].title+"</h3>									<p>"+siteIndex.posts[s].excerpt+"</p>								</a>",searchResults.appendChild(i),i.querySelector("a").addEventListener("click",function(){ga("send","event","Search Result","hit",this.href)})}}r>=1?searchHandler("highlight","first"):searchHandler("fallback","Nothing found\u2026")}else searchHandler("fallback");searchForm.classList.remove("active")}break;case"reset":searchInput.value="",searchHandler("fallback");break;case"highlight":var u=searchResults.querySelector(".highlighted");if("first"===t?searchResults.querySelector("li:first-child").classList.add("highlighted"):u&&"down"===t&&u.nextSibling?(u.classList.remove("highlighted"),u.nextSibling.classList.add("highlighted")):u&&"up"===t&&u.previousSibling&&(u.classList.remove("highlighted"),u.previousSibling.classList.add("highlighted")),u=searchResults.querySelector(".highlighted")){var h=searchResults.scrollTop,p=searchResults.clientHeight,f=u.offsetTop,m=u.clientHeight;f+m>h+p&&(searchResults.scrollTop=f+m-p),h>f&&(searchResults.scrollTop=f)}break;case"select":var u=searchResults.querySelector(".highlighted a");u&&(window.location.href=u.href);break;case"fallback":searchHandler("clean");var v=document.createElement("li"),g=searchForm.getAttribute("data-fallback");t&&(g=t),v.classList.add("fallback"),v.appendChild(document.createTextNode(g)),searchResults.appendChild(v),t||history.replaceState(null,"",n.path+n.hash)}}function contactHandler(e){switch(e){case"show":document.querySelector(".contact").classList.add("invoked"),ga("send","event","Contact Menu","invoked");break;case"hide":document.querySelector(".contact").classList.remove("invoked")}}function formHandler(e,t){switch(e){case"restore":applyForm.classList.contains("response")&&(applyForm.classList.remove("response"),applyForm.classList.remove("success"),applyButton.textContent="Submit Enquiry");break;case"submit":formHandler("restore"),applyForm.classList.add("active"),applyButton.textContent="Submitting\u2026",forEach(applyForm.querySelectorAll("input"),function(e,t){t.readOnly=!0}),applyForm.querySelector("textarea").readOnly=!0;var n=document.createElement("script");n.src=t,document.body.appendChild(n),ga("send","event","Enquiry Form","submitted");break;case"respond":applyForm.classList.remove("active"),applyForm.classList.add("response"),"success"===t?(applyForm.classList.add("success"),applyButton.textContent="Sent. Thanks!",applyButton.disabled=!0,ga("send","event","Enquiry Form","returned","success")):"error"===t&&(applyButton.textContent="Oops! Check inputs and try again.",forEach(applyForm.querySelectorAll("input"),function(e,t){t.readOnly=!1}),applyForm.querySelector("textarea").readOnly=!1,ga("send","event","Enquiry Form","returned","error")),document.body.removeChild(document.querySelector('script[src*="'+applyForm.action+'"]'))}}function cmResponse(e){200==e.Status?formHandler("respond","success"):400==e.Status&&formHandler("respond","error")}function segmentedViewHandler(e,t,n){forEach(t,function(t,n){n.getAttribute("data-segment")===e?n.classList.add("selected"):n.classList.remove("selected")}),forEach(n,function(t,n){n.getAttribute("data-segment")===e?n.classList.add("selected"):n.classList.remove("selected")})}function forEach(e,t,n){for(var a=0;a<e.length;a++)t.call(n,a,e[a])}function inTree(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e}function xhrGET(e,t){var n=new XMLHttpRequest,a=e.split(".").pop();n.open("GET",e,!0),"json"===a&&(n.overrideMimeType("application/json"),n.onload=function(){t(JSON.parse(this.responseText))}),"html"===a&&(n.responseType="document",n.onload=function(){t(this.responseXML)}),n.send()}function getParameter(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function throttle(e,t,n){n=n||window;var a=!1,r=function(){a||(a=!0,requestAnimationFrame(function(){n.dispatchEvent(new CustomEvent(t)),a=!1}))};n.addEventListener(e,r)}!function(e,t,n,a,r,s,o){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=a,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),"localhost"!==document.location.hostname&&ga("create","UA-19861044-1","auto"),ga("send","pageview"),window.addEventListener("load",function(){forEach(document.querySelectorAll(".view-home .tiles a"),function(e,t){t.addEventListener("click",function(){ga("send","event","Tile","hit",t.href)})}),forEach(document.querySelectorAll(".view-home .stream a"),function(e,t){t.addEventListener("click",function(){ga("send","event","Stream Item (Home)","hit",t.href)})}),forEach(document.querySelectorAll('[href="/feed.xml"]'),function(e,t){t.addEventListener("click",function(){ga("send","event","Feed","requested")})}),forEach(document.querySelectorAll('[href^="https://twitter.com/"]'),function(e,t){t.addEventListener("click",function(){ga("send","event","Twitter Profile","hit",t.href.replace("https://twitter.com/",""))})})},!1),!function(e,t,n){function a(e,t){return typeof e===t}function r(){var e,t,n,r,s,o,c;for(var i in y)if(y.hasOwnProperty(i)){if(e=[],t=y[i],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=a(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)o=e[s],c=o.split("."),1===c.length?b[c[0]]=r:(!b[c[0]]||b[c[0]]instanceof Boolean||(b[c[0]]=new Boolean(b[c[0]])),b[c[0]][c[1]]=r),E.push((r?"":"no-")+c.join("-"))}}function s(e){var t=L.className,n=b._config.classPrefix||"";if(S&&(t=t.baseVal),b._config.enableJSClass){var a=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(a,"$1"+n+"js$2")}b._config.enableClasses&&(t+=" "+n+e.join(" "+n),S?L.className.baseVal=t:L.className=t)}function o(e,t){return!!~(""+e).indexOf(t)}function c(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):S?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function i(){var e=t.body;return e||(e=c(S?"svg":"body"),e.fake=!0),e}function l(e,n,a,r){var s,o,l,d,u="modernizr",h=c("div"),p=i();if(parseInt(a,10))for(;a--;)l=c("div"),l.id=r?r[a]:u+(a+1),h.appendChild(l);return s=c("style"),s.type="text/css",s.id="s"+u,(p.fake?p:h).appendChild(s),p.appendChild(h),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),h.id=u,p.fake&&(p.style.background="",p.style.overflow="hidden",d=L.style.overflow,L.style.overflow="hidden",L.appendChild(p)),o=n(h,e),p.fake?(p.parentNode.removeChild(p),L.style.overflow=d,L.offsetHeight):h.parentNode.removeChild(h),!!o}function d(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function u(t,a){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(d(t[r]),a))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];r--;)s.push("("+d(t[r])+":"+a+")");return s=s.join(" or "),l("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function h(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function p(e,t,r,s){function i(){d&&(delete H.style,delete H.modElem)}if(s=a(s,"undefined")?!1:s,!a(r,"undefined")){var l=u(e,r);if(!a(l,"undefined"))return l}for(var d,p,f,m,v,g=["modernizr","tspan"];!H.style;)d=!0,H.modElem=c(g.shift()),H.style=H.modElem.style;for(f=e.length,p=0;f>p;p++)if(m=e[p],v=H.style[m],o(m,"-")&&(m=h(m)),H.style[m]!==n){if(s||a(r,"undefined"))return i(),"pfx"==t?m:!0;try{H.style[m]=r}catch(y){}if(H.style[m]!=v)return i(),"pfx"==t?m:!0}return i(),!1}function f(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var r;for(var s in e)if(e[s]in t)return n===!1?e[s]:(r=t[e[s]],a(r,"function")?f(r,n||t):r);return!1}function v(e,t,n,r,s){var o=e.charAt(0).toUpperCase()+e.slice(1),c=(e+" "+q.join(o+" ")+o).split(" ");return a(t,"string")||a(t,"undefined")?p(c,t,r,s):(c=(e+" "+x.join(o+" ")+o).split(" "),m(c,t,n))}function g(e,t,a){return v(e,n,n,t,a)}var y=[],w={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},b=function(){};b.prototype=w,b=new b;var E=[],L=t.documentElement,S="svg"===L.nodeName.toLowerCase(),k="Moz O ms Webkit",q=w._config.usePrefixes?k.split(" "):[];w._cssomPrefixes=q;var C={elem:c("modernizr")};b._q.push(function(){delete C.elem});var H={style:C.elem.style};b._q.unshift(function(){delete H.style});var x=w._config.usePrefixes?k.toLowerCase().split(" "):[];w._domPrefixes=x,w.testAllProps=v,w.testAllProps=g,b.addTest("backdropfilter",g("backdropFilter")),r(),s(E),delete w.addTest,delete w.addAsyncTest;for(var A=0;A<b._q.length;A++)b._q[A]();e.Modernizr=b}(window,document),document.addEventListener("DOMContentLoaded",function(){document.documentElement.classList.add("dom")},!1),window.addEventListener("load",function(){document.documentElement.classList.add("window")},!1),document.addEventListener("DOMContentLoaded",function(){forEach(document.querySelectorAll("img[data-fallback]"),function(e,t){imageHandler("fallback",t)})},!1),window.addEventListener("load",function(){forEach(document.querySelectorAll("img"),function(e,t){imageHandler("parse",t)})},!1),window.addEventListener("load",function(){if(forEach(document.querySelectorAll(".apps a"),function(e,t){t.addEventListener("click",function(){this.classList.contains("selected")||appHandler(t.getAttribute("href").substring(1))})}),document.querySelector(".view-apps")){var e=document.querySelector(".apps a:first-child").getAttribute("href").substring(1);window.location.hash&&(e=window.location.hash.substring(1)),appHandler(e)}},!1),window.addEventListener("load",function(){searchForm=document.querySelector(".search"),searchInput=searchForm.querySelector('[type="search"]'),searchResults=searchForm.querySelector(".results"),searchHandler("init"),document.body.addEventListener("touchstart",function(e){inTree(e.target,".search")||searchHandler("hide")}),document.body.addEventListener("mousedown",function(e){inTree(e.target,".search")||searchHandler("hide")}),searchForm.addEventListener("submit",function(e){e.preventDefault()}),searchForm.addEventListener("reset",function(e){e.preventDefault(),searchHandler("reset")}),searchInput.addEventListener("focus",function(){searchHandler("show")}),searchInput.addEventListener("blur",function(){searchHandler("hide")}),searchInput.addEventListener("keydown",function(e){27!==e.which||searchInput.value.length?27===e.which&&searchHandler("reset"):searchInput.blur();var t=[40,38,13];t.indexOf(e.which)>-1&&e.preventDefault(),40===e.which?searchHandler("highlight","down"):38===e.which?searchHandler("highlight","up"):13===e.which&&searchHandler("select")}),searchInput.addEventListener("input",function(){searchHandler("search",searchInput.value)}),searchResults.addEventListener("mousedown",function(e){e.preventDefault()}),forEach(document.querySelectorAll("[data-tag]"),function(e,t){t.href="#";var n="#"+t.textContent.replace(/\W/g,"").toLowerCase();t.addEventListener("click",function(e){e.preventDefault(),searchInput.focus(),searchHandler("search",n),searchHandler("show"),ga("send","event","Tag","hit",n)},!1)})},!1),window.addEventListener("pageshow",function(e){e.persisted&&searchHandler("init")}),window.addEventListener("throttledResize",function(){searchHandler("overscroll")}),window.addEventListener("load",function(){document.body.addEventListener("touchstart",function(e){inTree(e.target,".contact")||contactHandler("hide")}),document.body.addEventListener("touchmove",function(e){inTree(e.target,".contact .menu")?e.preventDefault():contactHandler("hide")}),document.body.addEventListener("mousedown",function(e){inTree(e.target,".contact")||contactHandler("hide")}),document.querySelector(".contact .control").addEventListener("click",function(){contactHandler(document.querySelector(".contact.invoked")?"hide":"show")}),forEach(document.querySelectorAll('[href="/contact/"]'),function(e,t){t.addEventListener("click",function(e){e.preventDefault(),contactHandler("show")})}),forEach(document.querySelectorAll(".menu-bar .contact .menu a"),function(e,t){t.addEventListener("click",function(e){e.preventDefault(),contactHandler("hide");var n;this.hasAttribute("data-name")&&this.getAttribute("data-domain")?n="mailto:"+this.getAttribute("data-name")+"@"+this.getAttribute("data-domain")+"?subject="+this.getAttribute("data-domain")+"%20Enquiry":t.href&&(n=t.href),ga("send","event","Contact Menu Control","hit",n),window.location.href=n})})},!1),window.addEventListener("load",function(){applyForm=document.querySelector(".apply-form"),applyForm&&(applyButton=applyForm.querySelector("button"),applyForm.addEventListener("input",function(){formHandler("restore")}),applyForm.querySelector("textarea").addEventListener("input",function(){applyForm.querySelector('[for="'+this.id+'"] em').textContent=this.getAttribute("maxlength")-this.value.length}),applyForm.addEventListener("submit",function(e){e.preventDefault(),formHandler("submit",this.action+"?callback=cmResponse&"+serialize(this))}),ga("send","event","Enquiry Form","displayed"))},!1),window.addEventListener("load",function(){var e=document.querySelectorAll(".view-notes .segmented-control a"),t=document.querySelectorAll(".view-notes .page [data-segment]");forEach(e,function(n,a){var r=a.getAttribute("data-segment");a.addEventListener("mousedown",function(){segmentedViewHandler(r,e,t)},!1),a.addEventListener("touchstart",function(){segmentedViewHandler(r,e,t)},!1)})},!1);